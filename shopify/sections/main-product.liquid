{% schema %}
{
  "name": "Product",
  "class": "section-main-product",
  "settings": [
    {
      "type": "radio",
      "id": "picker_type",
      "label": "Variant Picker Type",
      "options": [
        {
          "value": "radio",
          "label": "Radio Buttons"
        },
        {
          "value": "select",
          "label": "Select Dropdowns"
        }
      ],
      "default": "radio"
    }
  ]
}
{% endschema %}

<script defer src="{{ 'prodify.static.js' | asset_url }}"></script>

<div
  class="shopify-section-main-product-inner shell"
  data-handle="{{ product.handle }}"
  data-id="{{ product.id }}"
  data-url="{{ product.url }}"
  data-section="{{ section.id }}"
  data-prodify="{{ section.settings.picker_type }}"
>
  <script type="application/json" data-prodify-variants-json>
    {{ product.variants | json }}
  </script>
  <a class="skip-to-content-link sr-only" href="#product-info-{{ section.id }}"> Skip to product info </a>
  <div class="flex pdp-main" style="position: relative;">
    <div class="media" data-prodify-media-container>
      <span style="position: absolute; top: 0; left: 0; z-index: 1; font-size: 10px;">
        {{ product.selected_or_first_available_variant.id }}
      </span>
      <div class="image-wrapper" style="padding-top: 137%;">
        {%- if product.selected_or_first_available_variant.image != null -%}
          variant image
          {% render 'image-srcset', image: product.selected_or_first_available_variant.image %}
        {% else %}
          no variant image
          {% render 'image-srcset', image: product.featured_image %}
        {%- endif -%}
      </div>
    </div>
    <div class="info" id="product-info-{{ section.id }}">
      <p class="caption">{{ product.type | upcase }}</p>
      <h1>{{ product.title }}</h1>
      <div class="flex items-center py-2" data-prodify-price-container>
        <span class="sr-only">Regular Price</span>
        {% if product.selected_or_first_available_variant.compare_at_price %}
          <span class="line-through">
            {{ product.selected_or_first_available_variant.compare_at_price }}
          </span>
        {% endif %}
        <span>
          {{ product.selected_or_first_available_variant.price | money }}
        </span>
      </div>

      {% render 'product-variant-picker', product: product, product_form_id: 'product-form-id', picker_type: section.settings.picker_type %}

      {% comment %}
        <div class="quantity-row">
          <label for="quantity-control-input">Quantity</label>
          <div class="quantity-control-container">
            <button @click="quantity = Math.max(quantity - 1, 1)" :disabled="quantity == 0">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
                focusable="false"
                role="presentation"
                class="icon icon-minus"
                fill="none"
                viewBox="0 0 10 2"
              >
                <path fill-rule="evenodd" clip-rule="evenodd" d="M.5 1C.5.7.7.5 1 .5h8a.5.5 0 110 1H1A.5.5 0 01.5 1z"
                  fill="currentColor">
                </path>
              </svg>
            </button>
            <input
              tabindex="-1"
              type="number"
              id="quantity-control-input"
              value="1"
              x-model="quantity"
              :disabled="quantity == 0"
            >
            <button @click="quantity = quantity + 1" :disabled="quantity == 0">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
                focusable="false"
                role="presentation"
                class="icon icon-plus"
                fill="none"
                viewBox="0 0 10 10"
              >
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M1 4.51a.5.5 0 000 1h3.5l.01 3.5a.5.5 0 001-.01V5.5l3.5-.01a.5.5 0 00-.01-1H5.5L5.49.99a.5.5 0 00-1 .01v3.5l-3.5.01H1z"
                  fill="currentColor">
                </path>
              </svg>
            </button>
          </div>
        </div>
      {% endcomment %}
      <form action="{{ routes.cart_add_url }}" id="product_form_id" class="product-form" novalidate="novalidate" data-prodify-product-form>
        <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
        <input type="hidden" name="quantity" value="1">
        <div class="hover:after:border-offset-1 mb-[10px]">
          <button
            type="submit"
            name="add"
            class="border hover:border-2 hover:border-black border-primary px-6 text-cloud-burst-500 w-full h-12 cursor-pointer disabled:cursor-default mb-2"
            {% if product.selected_or_first_available_variant.available == false %}
              disabled
            {% endif %}
          >
            <span>
              {%- if product.selected_or_first_available_variant.available -%}
                Add to cart
              {%- else -%}
                Sold out
              {%- endif -%}
            </span>
          </button>
        </div>
        <div data-ajax-cart-messages="form">
          <!-- Error messages appear here -->
        </div>
        {% comment %}
          {%- if product.selected_or_first_available_variant.available -%}
            <a
              type="button"
              class="w-full h-12 px-6 text-white bg-cloud-burst-500 flex items-center justify-center hover:after:border-offset-1"
              :href="`/cart/${selectedVariant}:1`"
              x-show="showBuyNow"
            >
              Buy it now
            </a>
          {%- endif -%}
        {% endcomment %}
      </form>

      <div class="description rte">
        {{ product.description }}
      </div>
    </div>
  </div>
</div>

<style>
  input[type='radio'].disabled + label {
    text-decoration: line-through;
  }

  .section-main-product {
    padding: 50px;
    font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Ubuntu, Helvetica Neue, sans-serif,
      Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
  }

  @media (max-width: 576px) {
    .section-main-product {
      padding: 15px;
    }
  }

  .section-main-product .shopify-section-main-product-inner .flex {
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
  }

  .section-main-product .shopify-section-main-product-inner .flex .media {
    width: 100%;
    flex: 2 1 400px;
  }

  .section-main-product .shopify-section-main-product-inner .flex .media .image-wrapper {
    position: relative;
    width: 100%;
  }

  .section-main-product .shopify-section-main-product-inner .flex .media .image-wrapper img {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info {
    flex: 1 1 300px;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info .caption {
    letter-spacing: 1.3px;
    font-size: 10px;
    line-height: 12px;
    color: rgba(26, 27, 24, 0.75);
  }

  .section-main-product .shopify-section-main-product-inner .flex .info h1 {
    font-size: 40px;
    font-weight: 400;
    line-height: 52px;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info dl dd {
    letter-spacing: 1.3px;
    font-size: 18px;
    line-height: 27px;
    font-weight: 400;
    margin: 15px auto;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info fieldset {
    margin-bottom: 20px;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info fieldset legend {
    font-size: 13px;
    letter-spacing: 0.4px;
    line-height: 19.5px;
    color: rgba(26, 27, 24, 0.75);
    margin-bottom: 16px;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info fieldset label {
    display: inline-block;
    padding: 10px 20px;
    border-radius: 40px;
    letter-spacing: 1px;
    font-size: 14px;
    cursor: pointer;
  }

  body:not(.using-mouse)
    .section-main-product
    .shopify-section-main-product-inner
    .flex
    .info
    fieldset
    input:focus
    + label {
    outline: #08f auto 2px;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info fieldset label[data-unavailable='true'],
  .section-main-product .shopify-section-main-product-inner .flex .info fieldset input[disabled] + label {
    background-color: transparent;
    color: lightgray;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info .quantity-row label {
    display: block;
    font-size: 13px;
    letter-spacing: 0.4px;
    line-height: 19.5px;
    color: rgba(26, 27, 24, 0.75);
    margin-bottom: 4px;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info .quantity-row .quantity-control-container {
    display: flex;
    align-items: center;
    border: 1px solid rgba(26, 27, 24, 0.55);
    max-width: max-content;
    color: rgba(26, 27, 24, 0.75);
    font-family: Arial;
    font-size: 14px;
  }

  .section-main-product
    .shopify-section-main-product-inner
    .flex
    .info
    .quantity-row
    .quantity-control-container
    button {
    width: 45px;
    height: 45px;
    appearance: none;
    -webkit-appearance: none;
    background: transparent;
    border: none;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
  }

  .section-main-product
    .shopify-section-main-product-inner
    .flex
    .info
    .quantity-row
    .quantity-control-container
    button
    svg {
    width: 10px;
  }

  .section-main-product
    .shopify-section-main-product-inner
    .flex
    .info
    .quantity-row
    .quantity-control-container
    input {
    appearance: none;
    -webkit-appearance: none;
    border: none;
    pointer-events: none;
    width: 48px;
    text-align: center;
    padding: 0;
  }

  .section-main-product
    .shopify-section-main-product-inner
    .flex
    .info
    .quantity-row
    .quantity-control-container
    input[type='number']::-webkit-inner-spin-button,
  .section-main-product
    .shopify-section-main-product-inner
    .flex
    .info
    .quantity-row
    .quantity-control-container
    input[type='number']::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info form {
    margin: 25px auto;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info .description {
    font-size: 16px;
    line-height: 28.8px;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info .description em {
    font-style: italic;
  }

  .section-main-product .shopify-section-main-product-inner .flex .info .description a {
    color: rgba(68, 89, 88, 0.85);
  }
</style>
